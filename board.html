<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://www.w3schools.com/lib/w3.js"></script>
    <link rel="icon" type="image/x-icon" href="./assets/img/join.svg" />
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="styles/button.css" />
    <link rel="stylesheet" href="styles/style_subtask.css" />
    <link rel="stylesheet" href="styles/style_top_menu.css" />
    <link rel="stylesheet" href="styles/style_index.css" />
    <link rel="stylesheet" href="styles/add_task_style.css" />
    <link rel="stylesheet" href="./styles/board.css" />
    <script src="./JS/utils.js" defer></script>
    <script src="./JS/board.js" defer></script>
    <script src="./JS/drag_drop.js" defer></script>
    <script src="./JS/fetch.js" defer></script>
    <script src="./JS/icons.js" defer></script>
    <script src="./JS/templates.js" defer></script>
    <script src="./JS/contacts1.js" defer></script>
    <script src="./JS/contacts2.js" defer></script>
    <script src="./JS/tasks_subtasks.js" defer></script>
    <script src="./JS/task_utils.js" defer></script>
    <script src="./JS/task_utils2.js" defer></script>
    <script src="./JS/tasks.js" defer></script>
    <script src="./JS/tasks_modal.js" defer></script>
    <script src="./JS/tasks_form.js" defer></script>
    <script src="./script.js" defer></script>
    <title>Join - Board</title>
  </head>

  <body data-page="board" onload="initBoard()">
    <div class="display_grid">
      <header class="header_join">
        <div w3-include-html="partials/top_menu.html"></div>
      </header>
      <div class="navbar_shell" w3-include-html="partials/navbar.html"></div>

      <div class="board_help_div">
        <main class="board">
          <section id="board_head" class="board_head">
            <h1 class="board_title">Board</h1>
            <div class="board_head_btns">
              <div id="no_results_message" class="no_results_message is-hidden"><span>No results found</span></div> 
              <div class="search_task_area">
                <input
                  id="input_search_task"
                  type="text"
                  class="search_task"
                  placeholder="Find Task"
                />
                <span
                  class="svg-icon"
                  data-icon="search"
                  data-w="18"
                  data-h="18"
                  ></span>
              </div>
              <button
                id="openAddTaskModalBtn"
                class="default-button add_task_button add_task_trigger"
              >
                Add task
                <span
                  class="svg-icon"
                  data-icon="add"
                  data-w="19"
                  data-h="19"
                ></span>
              </button>
            </div>
          </section>
          <section id="task_section" class="task_section">
            <div class="to_do task_list_div">
              <div class="task_list_head">
                <h2>To do</h2>
                <button class="add_task_trigger" data-status="0">
                  <span
                    class="svg-icon"
                    data-icon="add"
                    data-w="8"
                    data-h="8"
                    aria-label="add task"
                  ></span>
                </button>
              </div>
              <div class="task_list_wrapper">
                <div
                  id="task_to_do"
                  class="task_list"
                  ondrop="dropTask(event, 0)"
                  ondragover="allowDrop(event)"
                  ondragleave="removeDragPlaceholder(event)"
                >
                  <div class="no_task">
                    <p></p>
                  </div>
                </div>
              </div>
            </div>
            <div class="in_progress task_list_div">
              <div class="task_list_head">
                <h2>In progress</h2>
                <button class="add_task_trigger" data-status="1">
                  <span
                    class="svg-icon"
                    data-icon="add"
                    data-w="8"
                    data-h="8"
                    aria-label="add task"
                  ></span>
                </button>
              </div>
              <div class="task_list_wrapper">
                <div
                  id="task_progress"
                  class="task_list"
                  ondrop="dropTask(event, 1)"
                  ondragover="allowDrop(event)"
                  ondragleave="removeDragPlaceholder(event)"
                >
                  <div class="task">
                    <div class="t_category">
                      <p></p>
                    </div>
                    <div class="t_title_description">
                      <p class="t_title"></p>
                      <p class="t_description"></p>
                    </div>
                    <div class="t_sub_tasks">
                      <div class="t_sub_task_bar"></div>
                      <div class="t_sub_task_count"></div>
                    </div>
                    <div class="t_assigned_priotity">
                      <div class="t_assigned_to">
                        <p></p>
                        <p></p>
                      </div>
                      <div class="t_priority"></div>
                    </div>
                  </div>
                </div>
              </div>
              <!-- <div class="t_task">
                        <div class="t_category"></div>
                        <div class="t_title_description">
                            <p class="t_title"></p>
                            <p class="t_description"></p>
                        </div>
                        <div class="t_sub_tasks">
                            <div class="t_sub_task"></div>
                            <div class="t_sub_task_count"></div>
                        </div>
                        <div class="t_assigned_priotity">
                            <div class="t_assignet_to"></div>
                            <div class="t_priority"></div>
                        </div>
                    </div>-->
            </div>
            <div class="await_feedback task_list_div">
              <div class="task_list_head">
                <h2>Await feedback</h2>
                <button class="add_task_trigger" data-status="2">
                  <span
                    class="svg-icon"
                    data-icon="add"
                    data-w="8"
                    data-h="8"
                    aria-label="add task"
                  ></span>
                </button>
              </div>
              <div class="task_list_wrapper">
                <div
                  id="task_await"
                  class="task_list"
                  ondrop="dropTask(event, 2)"
                  ondragover="allowDrop(event)"
                  ondragleave="removeDragPlaceholder(event)"
                >
                  <div class="task">
                    <div class="t_category">
                      <p>User Story</p>
                    </div>
                    <div class="t_title_description">
                      <p class="t_title">Kochwelt Page & Description</p>
                      <p class="t_description">
                        build start page with recipe recommendation...
                      </p>
                    </div>
                    <div class="t_sub_tasks">
                      <div class="t_sub_task"></div>
                      <div class="t_sub_task_count">1/2 Subtasks</div>
                    </div>
                    <div class="t_assigned_priotity">
                      <div class="t_assigned_to">
                        <p>AM</p>
                        <p>ME</p>
                      </div>
                      <div class="t_priority"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="done task_list_div">
              <div class="task_list_head">
                <h2>Done</h2>
              </div>
              <div class="task_list_wrapper">
                <div
                  id="task_done"
                  class="task_list"
                  ondrop="dropTask(event, 3)"
                  ondragover="allowDrop(event)"
                  ondragleave="removeDragPlaceholder(event)"
                >
                  <div class="task">
                    <div class="t_category">
                      <p style="background-color: #1fd7c1">User Story</p>
                    </div>
                    <div class="t_title_description">
                      <p class="t_title">Kochwelt Page & Description</p>
                      <p class="t_description">
                        build start page with recipe recommendation...
                      </p>
                    </div>
                    <div class="t_sub_tasks">
                      <div class="t_sub_task"></div>
                      <div class="t_sub_task_count">1/2 Subtasks</div>
                    </div>
                    <div class="t_assigned_priotity">
                      <div class="t_assigned_to">
                        <p>AM</p>
                        <p>ME</p>
                      </div>
                      <div class="t_priority"></div>
                    </div>
                  </div>
                  <div class="task">
                    <div class="t_category">
                      <p>User Story</p>
                    </div>
                    <div class="t_title_description">
                      <p class="t_title">Kochwelt Page & Description</p>
                      <p class="t_description">
                        build start page with recipe recommendation...
                      </p>
                    </div>
                    <div class="t_sub_tasks">
                      <div class="t_sub_task"></div>
                      <div class="t_sub_task_count">1/2 Subtasks</div>
                    </div>
                    <div class="t_assigned_priotity">
                      <div class="t_assigned_to">
                        <p>AM</p>
                        <p>ME</p>
                      </div>
                      <div class="t_priority"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>
        </main>
      </div>

    <dialog id="addTaskModal" class="modal">
        <div class="add_task_modal_content">
          <button type="button" class="add_task_modal_close" aria-label="Close">
            ×
          </button>
          <div id="addTaskModalHost"></div>
        </div>

        <div
          class="task_success_overlay"
          id="task_modal_success_overlay"
          aria-hidden="true"
          data-hold-ms="900"
        >
          <div
            class="task_success_box"
            data-toast-box
            role="status"
            aria-live="polite"
          >
            Task added to Board
          </div>
        </div>
    </dialog>

    <dialog id="show_task_modal" class="modal">
        <div class="task_modal_shell">
            <div class="task_modal_header">

                <button type="button" class="btn_close_modal" aria-label="Close">
                    <span class="svg-icon" data-icon="delCross" data-w="20" data-h="20"></span>
                </button>
                <!-- corner close button  -->

            </div>

            <div class="edit_task_modal_host" id="EditTaskModalHost"></div>

            <div class="task_dialog" id="task_dialog_content_wrapper">
            <header class="task_dialog_header marg_bot_16">
                <span class="tsk_dlg_type">User Story</span>
                <!-- user story Box -->
            </header>

            <main>
                <h1 id="tsk_dlg_h1" class="tsk_dlg_h1 marg_bot_16"></h1>
                <!-- Titel -->
                <h2 id="tsk_dlg_h2" class="tsk_dlg_h2 marg_bot_16"></h2>
                <!-- Description -->
                <section class="tsk_dlg_due_date_sec marg_bot_16">
                    <!-- due date -->
                    <span>Due date:</span>
                    <span id="tsk_dlg_due_date"></span>
                </section>

                <section class="tsk_dlg_prio_sec marg_bot_16">
                    <!-- priority -->
                    <span class="marg_r_53">Priority:</span>
                    <div id="tsk_dlg_prio_div" class="tsk_dlg_prio_div">
                        <!-- ganzen Container inhalt als templ. einfügen -->
                        <span>Low</span>
                        <span
                        class="svg-icon"
                        data-icon="prioLow"
                        data-w="20"
                        data-h="16"
                        ></span>
                    </div>
                </section>

                <section class="tsk_dlg_assgnd_sec marg_bot_16">
                    <!-- assigend to -->
                    <span>Assigned To:</span>
                    <div id="tsk_dlg_assgnd_div" class="tsk_dlg_assgnd_div">
                        <div class="tsk_dlg_assgnd">
                        <!-- Avatar und Name -->
                        <span class="sml_user_avatar">EM</span>
                        <span>Emmanuel Mauer</span>
                        </div>
                    </div>
                </section>

                <section class="tsk_dlg_sbtsk_sec marg_bot_16">
                    <!-- subtasks -->
                    <span>Subtasks</span>
                    <div id="tsk_dlg_sbtsk" class="tsk_dlg_sbtsk">
                        <!-- checkbox for subtask done -->

                        <ul id="subtasks_check_list" class="subtasks_check_list">
                        <li data-index="0">
                            <div class="subtask_action">
                            <button
                                type="button"
                                class="icon_btn icon_btn--nohovercircle"
                                data-action="toggle"
                            >
                                <div class="checkbox_svg" aria-hidden="true">
                                <svg
                                    class="checkbox_unchecked"
                                    width="18"
                                    height="18"
                                    viewBox="0 0 18 18"
                                    fill="none"
                                >
                                    <rect
                                    x="1"
                                    y="1"
                                    width="16"
                                    height="16"
                                    rx="3"
                                    stroke="var(--blue)"
                                    stroke-width="2"
                                    ></rect>
                                </svg>
                                <svg
                                    class="checkbox_checked"
                                    width="18"
                                    height="18"
                                    viewBox="0 0 18 18"
                                    fill="none"
                                >
                                    <path
                                    d="M17 8V14C17 15.6569 15.6569 17 14 17H4C2.34315 17 1 15.6569 1 14V4C1 2.34315 2.34315 1 4 1H12"
                                    stroke="white"
                                    stroke-width="2"
                                    stroke-linecap="round"
                                    ></path>
                                    <path
                                    d="M5 9L9 13L17 1.5"
                                    stroke="white"
                                    stroke-width="2"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    ></path>
                                </svg>
                                <span>Implement Recipe Recommendation</span>
                                </div>
                            </button>
                            </div>
                        </li>
                        </ul>
                    </div>
                </section>

                <section class="tsk_dlg_act_sec marg_bot_16">
                <!-- delete & edit button -->
                    <div class="tsk_dlg_act_btn_div">
                        <button
                        type="button"
                        class="icon_text_btn is-delete"
                        data-action="delete"
                        data-user-id="${taskId}"
                        id="btn_delete_task"
                        >
                        <span
                            class="svg-icon"
                            data-icon="recyBin"
                            data-w="18"
                            data-h="18"
                        ></span>
                        <span>Delete</span>
                        </button>
                        <span style="font-size: 16px">|</span>
                        <button
                        type="button"
                        class="icon_text_btn is-edit"
                        id="btn_edit_task"
                        data-action="edit"
                        data-user-id="${taskId}"
                        >
                        <span
                            class="svg-icon"
                            data-icon="editPencil"
                            data-w="18"
                            data-h="18"
                        ></span>
                        <span>Edit</span>
                        </button>
                    </div>
                </section>
            </main>
        </div>

    </div>

    </dialog>

      <script>
        w3.includeHTML(() => {
          if (window.renderIcons) window.renderIcons(document);
          if (window.initPage) window.initPage();
          if (window.setActiveNavLink) window.setActiveNavLink();
        });
      </script>
    </div>
  </body>
</html>
