<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://www.w3schools.com/lib/w3.js"></script>
    <link rel="icon" type="image/x-icon" href="./assets/img/join.svg">
    <link rel="stylesheet" href="styles/button.css">
    <link rel="stylesheet" href="styles/style_top_menu.css"/>
    <link rel="stylesheet" href="styles/style_index.css">
    <link rel="stylesheet" href="styles/add_task_style.css">
    <link rel="stylesheet" href="styles/style_subtask.css">
    <link rel="stylesheet" href="styles/style_index.css">
    <link rel="stylesheet" href="styles.css">
    <script src="./JS/utils.js" defer></script>
    <script src="./JS/fetch.js" defer></script>
    <script src="./JS/icons.js" defer></script>
    <script src="./JS/templates.js" defer></script>
    <script src="./JS/tasks_subtasks.js" defer></script>
    <script src="./JS/task_utils.js" defer></script>
    <script src="./JS/tasks.js" defer></script>
    
    <script src="./script.js" defer></script>
    <title>Document</title>
    <style></style>
</head>

<body data-page="add_task">
  <div class="display_grid">
    <header class="header_join">
      <div w3-include-html="partials/top_menu.html"></div>
    </header>
    <div class="navbar_shell" w3-include-html="partials/navbar.html"></div>

    <main class="add_task_main">
        <div id="addTaskInlineHost">
            <form id="addTaskForm" class="add_task_form" action="/add_task" method="post">
                <h1 class="add_task_titel">Add Task</h1>
                <div class="add_task_form_left">
                    <div class="form_row">
                        <label for="task_titel">Title<span class="red_star">*</span></label>
                        <input class="standard_input_box" type="text" id="task_titel" name="task_titel" placeholder="Enter a title" required>
                    </div>
                    <div class="form_row">
                        <label for="task_descr">Description</label>
                        <textarea class="task_descr_textarea" id="task_descr" name="task_descr" rows="4" cols="50"
                            required placeholder="Enter a description"></textarea>
                    </div>
                    <div class="form_row">
                        <label for="task_due_date">Due Date<span class="red_star">*</span></label>
                        <input class="standard_input_box" type="date" id="task_due_date" name="task_due_date" aria-label="dd/mm/yyyy" required>
                    </div>
                </div>
                <div class="add_task_form_right">
                    <fieldset class="priority_buttons_container">
                        <legend>Priority</legend>
                        <label class="priority_btn priority_urgent">
                            <input type="radio" name="priority" value="urgent" required>
                            <span class="svg-icon" data-icon="prioUrgent" data-w="20" data-h="16">Urgent</span>
                        </label>

                        <label class="priority_btn priority_medium">
                            <input type="radio" name="priority" value="medium" checked>
                            <span class="svg-icon" data-icon="prioMedium" data-w="20" data-h="20">Medium</span>
                        </label>

                        <label class="priority_btn priority_low">
                            <input type="radio" name="priority" value="low">
                            <span class="svg-icon" data-icon="prioLow" data-w="20" data-h="16">Low</span>
                        </label>
                    </fieldset>
                    <div class="form_row">
                        <label for="assigned_to_input">Assigned to</label>

                        <div class="multi_select" id="assigned_to">
                            <div class="multi_select__control" aria-haspopup="listbox" aria-expanded="false">
                                <div class="multi_select__placeholder" id="assigned_to_placeholder">
                                    Select contacts to assign
                                </div>
                                <input type="text" id="assigned_to_filter" class="multi_select__filter" autocomplete="off" aria-label="Filter users" hidden/>
                                <div class="multi_select__value" id="assigned_to_value" hidden></div>
                                <button type="button" class="multi_select__toggle" id="assigned_to_toggle" aria-label="Toggle dropdown">
                                    <div class="caret"></div>
                                </button>
                            </div>
                            <div class="multi_select__dropdown" id="assigned_to_dropdown" role="listbox" aria-multiselectable="true" hidden>
                            <ul class="multi_select__list" id="assigned_to_list"></ul>
                            </div>
                            <input type="hidden" id="assigned_to_input" name="assigned_to" required />
                        </div>
                    </div>

                    <div class="assigned_avatar" id="assigned_avatar_container"></div>

                    <div class="form_row">
                        <label for="task_type">Task type</label>

                        <div class="single_select" id="task_type_select">
                            <div class="single_select__control" id="task_type_control">
                            <span class="single_select__placeholder">Select task type</span>
                            <span class="single_select__value" hidden></span>

                            <button type="button" class="multi_select__toggle" aria-label="Toggle">
                                <div class="caret"></div>
                            </button>
                            </div>

                            <div class="single_select__dropdown" hidden>
                                <ul class="single_select__list"></ul>
                            </div>

                            <input type="hidden" id="task_type" name="task_type" required>
                        </div>
                    </div>

                    <div class="form_row">
                        <label for="subtasks">Subtasks</label>

                        <div class="subtasks_input_wrap standard_input_box">
                            <input class="input_subtasks" type="text" id="input_subtasks" name="subtasks" placeholder="Add new subtasks" autocomplete="off"/>
                            <div class="subtasks_actions" >
                                <button type="button" class="icon_btn subtasks_clear multi_select__toggle" aria-label="Clear subtask input"></button>
                                <span class="subtasks_divider" aria-hidden="true"></span>
                                <button type="button" class="icon_btn subtasks_add multi_select__toggle" aria-label="Add subtask"></button>
                            </div>
                        </div>

                        <ul id="subtasks_list" class="subtasks_list"></ul>
                        <input type="hidden" id="subtasks_list_input" name="subtasks_json" value="">
                    </div>


                </div>
                <div class="form_actions">
                    <button  onclick="clearTaskForm() " class="clear_button secondary-button" type="button">Clear <svg width="24" height="24" viewBox="0 0 24 24"
                            fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12.0011 11.9998L17.2441 17.2428M6.75806 17.2428L12.0011 11.9998L6.75806 17.2428ZM17.2441 
                            6.75684L12.0001 11.9998L17.2441 6.75684ZM12.0001 11.9998L6.75806 6.75684L12.0001 11.9998Z"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                    </button>
                     <button type="submit" class="create_button default-button">Create Task
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <mask id="mask0_415283_1199" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0"
                                width="24" height="24">
                                <rect width="24" height="24" fill="#D9D9D9" />
                            </mask>
                            <g mask="url(#mask0_415283_1199)">
                                <path d="M9.55069 15.15L18.0257 6.675C18.2257 6.475 18.4632 6.375 18.7382 6.375C19.0132 
                                6.375 19.2507 6.475 19.4507 6.675C19.6507 6.875 19.7507 7.1125 19.7507 7.3875C19.7507 
                                7.6625 19.6507 7.9 19.4507 8.1L10.2507 17.3C10.0507 17.5 9.81736 17.6 9.55069 17.6C9.28403 
                                17.6 9.05069 17.5 8.85069 17.3L4.5507 13C4.3507 12.8 4.25486 12.5625 4.2632 12.2875C4.27153 
                                12.0125 4.3757 11.775 4.5757 11.575C4.7757 11.375 5.0132 11.275 5.2882 11.275C5.5632 11.275 
                                5.80069 11.375 6.00069 11.575L9.55069 15.15Z"
                                fill="white" />
                            </g>
                        </svg>
                    </button>
                </div>
            </form>
        </div>
    </main>
  </div>

    <!-- Task added Success Toast -->
    <div class="task_success_overlay" id="task_success_overlay" aria-hidden="true" data-hold-ms="900">
        <div class="task_success_box" data-toast-box role="status" aria-live="polite">
            Task added to Board
        </div>
    </div>


    <script>
    w3.includeHTML(() => {
        if (window.renderIcons) window.renderIcons(document);
        if (window.initPage) window.initPage();
        if (window.setActiveNavLink) window.setActiveNavLink();
    });
    </script>
</body>

</html>